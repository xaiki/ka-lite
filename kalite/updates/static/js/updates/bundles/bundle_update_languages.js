require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"update_languages":[function(require,module,exports){
function version_comparison(e,t){for(var a,n,s=e.split("."),l=t.split("."),i=Math.min(s.length,l.length),u=0;i>u;u++){if(a=parseInt(s[u],10)||0,n=parseInt(l[u],10)||0,a>n)return 1;if(n>a)return-1}return 0}function get_available_languages(){return api.doRequest(window.sessionModel.get("AVAILABLE_LANGUAGEPACK_URL"),null,{cache:!1}).success(function(e){installable_languages=e,display_languages()}).fail(function(e,t,a){installable_languages=[],display_languages()})}function get_installed_languages(){return api.doRequest(window.Urls.installed_language_packs(),null,{cache:!1,datatype:"json"}).success(function(e){installed_languages=e,display_languages()}).fail(function(e,t,a){installed_languages=[],display_languages()})}function display_languages(){function e(e){api.doRequest(window.Urls.delete_language_pack(),{lang:e}).success(function(e){get_installed_languages(),display_languages(a)})}function t(){var e=$("#language-packs-ul");e.find("li").remove(),a.forEach(function(t,a){var s=t.subtitle_count,l=t.percent_translated,i=t.code,u=t.beta,r=n.map(function(e){return e.code});if(-1===$.inArray(i,r)&&(l>0||s>0)){var g=$("<li></li>").attr("id",sprintf("option-%(code)s",t)).attr("role","presentation").attr("value",sprintf("%(code)s",t)).click({caller_value:sprintf("%(code)s",t)},select_lang_pack).append($("<a></a>").attr("role","menu-item").html(sprintf("%(name)s",t)));u&&$("#beta-checkbox").is(":checked")?(g.find("a").append($("<span></span>").text(gettext("beta")).attr("class","beta-text")),e.append(g)):u||e.append(g)}})}var a=installable_languages,n=installed_languages;$("table.installed-languages").empty(),n.forEach(function(e,t){if(e.name){var n;n=e.code!==window.sessionModel.get("DEFAULT_LANGUAGE")?sprintf("<span><a onclick='set_server_language(\"%(lang)s\")' class='set_server_language' value='%(lang)s' href='#'><button type='button' class='btn btn-default btn-sm'>%(link_text)s</button></a></span>",{lang:e.code,link_text:gettext("Set as default")}):gettext("Default"),e.subtitles=gettext("Subtitles"),e.translated=gettext("Translated");var s=sprintf("<b>%(name)s</b><br>%(subtitle_count)d %(subtitles)s <br> %(percent_translated)d%% %(translated)s",e),l=e.code,i=sprintf("<tr><td class='lang-name'>%s</td><td class='lang-link'>%s </td>",s,n);if(a.length>0){var u=a.filter(function(t){return e.code===t.code});if(0!==u.length){u=u[0];var r=version_comparison(u.software_version,e.software_version),g=1==r||0===r&&u.language_pack_version>e.language_pack_version;if(g){var o=u.percent_translated-e.percent_translated,c=u.subtitle_count-e.subtitle_count;i+=sprintf("<td class='upgrade-link'><a href='#' onclick='start_languagepack_download(\"%(lang.code)s\")'>%(upgrade_text)s</a> <br> +%(translated)d%% %(translated_text)s <br> +%(srt)d %(srt_text)s / %(size)s</td>",{lang:e,upgrade_text:gettext("<button type='button' class='btn btn-info'>Upgrade</button>"),translated:o,translated_text:gettext("Translated"),srt:c,srt_text:gettext("Subtitles"),size:sprintf("%5.2f MB",u.zip_size/1e6||0)})}else i+=sprintf("<td class='upgrade-link'>%(up_to_date_text)s</td>",{up_to_date_text:gettext("Up to Date")})}}i+="en"!=l?sprintf("<td class='delete-language-button'> <button class='btn btn-danger' value='%s' type='button'>%s</button></td>",l,gettext("Delete")):e.subtitle_count>0?sprintf("<td class='delete-language-button'> <button class='btn btn-danger' value='%s' type='button'>%s</button></td>",l,gettext("Delete Subtitles")):sprintf("<td class='delete-language-button'></td>"),i+="<td class='clear'></td></tr>",$("table.installed-languages").append(i)}}),$(function(){$(".delete-language-button").children("button").click(function(t){function a(t){$("<div></div>").appendTo("body").html("<div><h6>"+t+"?</h6></div>").dialog({modal:!0,title:gettext("Confirm Delete"),zIndex:1e4,autoOpen:!0,width:"auto",resizable:!1,buttons:{Yes:function(){e(n),$(this).remove()},No:function(){$(this).remove()}}})}var n=$(this).val();a(sprintf(gettext("Are you sure you want to delete language pack '%(lang_code)s'"),{lang_code:n})),$("button.ui-dialog-titlebar-close").hide()})}),t(),$("#beta-checkbox").click(function(){t()})}function start_languagepack_download(e){messages.clear_messages(),$("#get-language-button").prop("disabled",!0),downloading=!0,api.doRequest(Urls.start_languagepack_download(),{lang:e}).success(function(e,t,a){base.updatesStart("retrievecontentpack",2e3,languagepack_callbacks)})}function select_lang_pack(e){var t=e.data.caller_value,a=!1,n=$(sprintf("#option-%s",t));$("#language-packs-selection").html(n.html()).append($("<span></span>").attr("class","caret")),$("#language-packs").attr("value",n.attr("value"));var s=installable_languages.filter(function(e){return t===e.code});if(a=0!==s.length,downloading||$("#get-language-button").prop("disabled",!a),a){var l=s[0];$("#lp-num-srts").text(sprintf("%d",l.subtitle_count||0)),$("#lp-pct-trans").text(sprintf("%5.2f%%",l.percent_translated||0)),$("#lp-down-size").text(sprintf("%5.2f MB",l.zip_size/1e6||0)),$("#lp-disk-size").text(sprintf("%5.2f MB",l.package_size/1e6||0)),$("#lp-num-exers").text(sprintf("%d",l.num_exercises||0))}$("#langpack-details").toggle(a)}function languagepack_reset_callback(e,t){get_installed_languages(),downloading=!1}function languagepack_complete_callback(e){}function set_server_language(e){api.doRequest(Urls.set_default_language(),{lang:e}).success(function(){window.location.reload()})}function update_server_status(){connectivity.with_online_status("server",function(e){e?base.updatesStart("retrievecontentpack",1e3,languagepack_callbacks):(messages.clear_messages(),messages.show_message("error",gettext("Could not connect to the central server; language packs cannot be downloaded at this time.")))})}var api=require("utils/api"),$=require("base/jQuery"),messages=require("utils/messages"),base=require("updates/base"),connectivity=require("utils/connectivity"),sprintf=require("sprintf-js").sprintf,installable_languages=[],installed_languages=[],downloading=!1,languagepack_callbacks={reset:languagepack_reset_callback,completed:languagepack_complete_callback};window.start_languagepack_download=start_languagepack_download;var language_downloading=null;$(function(){$("#get-language-button").click(function(e){language_downloading=$("#language-packs").attr("value"),start_languagepack_download(language_downloading)})}),window.set_server_language=set_server_language,$(function(){get_available_languages().success(update_server_status).fail(update_server_status),get_installed_languages().success(update_server_status).fail(update_server_status)});
},{"base/jQuery":45,"sprintf-js":660,"updates/base":129,"utils/api":115,"utils/connectivity":116,"utils/messages":119}]},{},["update_languages"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9mYWN0b3ItYnVuZGxlL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJrYWxpdGUvdXBkYXRlcy9zdGF0aWMvanMvdXBkYXRlcy9idW5kbGVfbW9kdWxlcy91cGRhdGVfbGFuZ3VhZ2VzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZnVuY3Rpb24gdmVyc2lvbl9jb21wYXJpc29uKGUsdCl7Zm9yKHZhciBhLG4scz1lLnNwbGl0KFwiLlwiKSxsPXQuc3BsaXQoXCIuXCIpLGk9TWF0aC5taW4ocy5sZW5ndGgsbC5sZW5ndGgpLHU9MDtpPnU7dSsrKXtpZihhPXBhcnNlSW50KHNbdV0sMTApfHwwLG49cGFyc2VJbnQobFt1XSwxMCl8fDAsYT5uKXJldHVybiAxO2lmKG4+YSlyZXR1cm4tMX1yZXR1cm4gMH1mdW5jdGlvbiBnZXRfYXZhaWxhYmxlX2xhbmd1YWdlcygpe3JldHVybiBhcGkuZG9SZXF1ZXN0KHdpbmRvdy5zZXNzaW9uTW9kZWwuZ2V0KFwiQVZBSUxBQkxFX0xBTkdVQUdFUEFDS19VUkxcIiksbnVsbCx7Y2FjaGU6ITF9KS5zdWNjZXNzKGZ1bmN0aW9uKGUpe2luc3RhbGxhYmxlX2xhbmd1YWdlcz1lLGRpc3BsYXlfbGFuZ3VhZ2VzKCl9KS5mYWlsKGZ1bmN0aW9uKGUsdCxhKXtpbnN0YWxsYWJsZV9sYW5ndWFnZXM9W10sZGlzcGxheV9sYW5ndWFnZXMoKX0pfWZ1bmN0aW9uIGdldF9pbnN0YWxsZWRfbGFuZ3VhZ2VzKCl7cmV0dXJuIGFwaS5kb1JlcXVlc3Qod2luZG93LlVybHMuaW5zdGFsbGVkX2xhbmd1YWdlX3BhY2tzKCksbnVsbCx7Y2FjaGU6ITEsZGF0YXR5cGU6XCJqc29uXCJ9KS5zdWNjZXNzKGZ1bmN0aW9uKGUpe2luc3RhbGxlZF9sYW5ndWFnZXM9ZSxkaXNwbGF5X2xhbmd1YWdlcygpfSkuZmFpbChmdW5jdGlvbihlLHQsYSl7aW5zdGFsbGVkX2xhbmd1YWdlcz1bXSxkaXNwbGF5X2xhbmd1YWdlcygpfSl9ZnVuY3Rpb24gZGlzcGxheV9sYW5ndWFnZXMoKXtmdW5jdGlvbiBlKGUpe2FwaS5kb1JlcXVlc3Qod2luZG93LlVybHMuZGVsZXRlX2xhbmd1YWdlX3BhY2soKSx7bGFuZzplfSkuc3VjY2VzcyhmdW5jdGlvbihlKXtnZXRfaW5zdGFsbGVkX2xhbmd1YWdlcygpLGRpc3BsYXlfbGFuZ3VhZ2VzKGEpfSl9ZnVuY3Rpb24gdCgpe3ZhciBlPSQoXCIjbGFuZ3VhZ2UtcGFja3MtdWxcIik7ZS5maW5kKFwibGlcIikucmVtb3ZlKCksYS5mb3JFYWNoKGZ1bmN0aW9uKHQsYSl7dmFyIHM9dC5zdWJ0aXRsZV9jb3VudCxsPXQucGVyY2VudF90cmFuc2xhdGVkLGk9dC5jb2RlLHU9dC5iZXRhLHI9bi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29kZX0pO2lmKC0xPT09JC5pbkFycmF5KGkscikmJihsPjB8fHM+MCkpe3ZhciBnPSQoXCI8bGk+PC9saT5cIikuYXR0cihcImlkXCIsc3ByaW50ZihcIm9wdGlvbi0lKGNvZGUpc1wiLHQpKS5hdHRyKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpLmF0dHIoXCJ2YWx1ZVwiLHNwcmludGYoXCIlKGNvZGUpc1wiLHQpKS5jbGljayh7Y2FsbGVyX3ZhbHVlOnNwcmludGYoXCIlKGNvZGUpc1wiLHQpfSxzZWxlY3RfbGFuZ19wYWNrKS5hcHBlbmQoJChcIjxhPjwvYT5cIikuYXR0cihcInJvbGVcIixcIm1lbnUtaXRlbVwiKS5odG1sKHNwcmludGYoXCIlKG5hbWUpc1wiLHQpKSk7dSYmJChcIiNiZXRhLWNoZWNrYm94XCIpLmlzKFwiOmNoZWNrZWRcIik/KGcuZmluZChcImFcIikuYXBwZW5kKCQoXCI8c3Bhbj48L3NwYW4+XCIpLnRleHQoZ2V0dGV4dChcImJldGFcIikpLmF0dHIoXCJjbGFzc1wiLFwiYmV0YS10ZXh0XCIpKSxlLmFwcGVuZChnKSk6dXx8ZS5hcHBlbmQoZyl9fSl9dmFyIGE9aW5zdGFsbGFibGVfbGFuZ3VhZ2VzLG49aW5zdGFsbGVkX2xhbmd1YWdlczskKFwidGFibGUuaW5zdGFsbGVkLWxhbmd1YWdlc1wiKS5lbXB0eSgpLG4uZm9yRWFjaChmdW5jdGlvbihlLHQpe2lmKGUubmFtZSl7dmFyIG47bj1lLmNvZGUhPT13aW5kb3cuc2Vzc2lvbk1vZGVsLmdldChcIkRFRkFVTFRfTEFOR1VBR0VcIik/c3ByaW50ZihcIjxzcGFuPjxhIG9uY2xpY2s9J3NldF9zZXJ2ZXJfbGFuZ3VhZ2UoXFxcIiUobGFuZylzXFxcIiknIGNsYXNzPSdzZXRfc2VydmVyX2xhbmd1YWdlJyB2YWx1ZT0nJShsYW5nKXMnIGhyZWY9JyMnPjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0nYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSc+JShsaW5rX3RleHQpczwvYnV0dG9uPjwvYT48L3NwYW4+XCIse2xhbmc6ZS5jb2RlLGxpbmtfdGV4dDpnZXR0ZXh0KFwiU2V0IGFzIGRlZmF1bHRcIil9KTpnZXR0ZXh0KFwiRGVmYXVsdFwiKSxlLnN1YnRpdGxlcz1nZXR0ZXh0KFwiU3VidGl0bGVzXCIpLGUudHJhbnNsYXRlZD1nZXR0ZXh0KFwiVHJhbnNsYXRlZFwiKTt2YXIgcz1zcHJpbnRmKFwiPGI+JShuYW1lKXM8L2I+PGJyPiUoc3VidGl0bGVfY291bnQpZCAlKHN1YnRpdGxlcylzIDxicj4gJShwZXJjZW50X3RyYW5zbGF0ZWQpZCUlICUodHJhbnNsYXRlZClzXCIsZSksbD1lLmNvZGUsaT1zcHJpbnRmKFwiPHRyPjx0ZCBjbGFzcz0nbGFuZy1uYW1lJz4lczwvdGQ+PHRkIGNsYXNzPSdsYW5nLWxpbmsnPiVzIDwvdGQ+XCIscyxuKTtpZihhLmxlbmd0aD4wKXt2YXIgdT1hLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gZS5jb2RlPT09dC5jb2RlfSk7aWYoMCE9PXUubGVuZ3RoKXt1PXVbMF07dmFyIHI9dmVyc2lvbl9jb21wYXJpc29uKHUuc29mdHdhcmVfdmVyc2lvbixlLnNvZnR3YXJlX3ZlcnNpb24pLGc9MT09cnx8MD09PXImJnUubGFuZ3VhZ2VfcGFja192ZXJzaW9uPmUubGFuZ3VhZ2VfcGFja192ZXJzaW9uO2lmKGcpe3ZhciBvPXUucGVyY2VudF90cmFuc2xhdGVkLWUucGVyY2VudF90cmFuc2xhdGVkLGM9dS5zdWJ0aXRsZV9jb3VudC1lLnN1YnRpdGxlX2NvdW50O2krPXNwcmludGYoXCI8dGQgY2xhc3M9J3VwZ3JhZGUtbGluayc+PGEgaHJlZj0nIycgb25jbGljaz0nc3RhcnRfbGFuZ3VhZ2VwYWNrX2Rvd25sb2FkKFxcXCIlKGxhbmcuY29kZSlzXFxcIiknPiUodXBncmFkZV90ZXh0KXM8L2E+IDxicj4gKyUodHJhbnNsYXRlZClkJSUgJSh0cmFuc2xhdGVkX3RleHQpcyA8YnI+ICslKHNydClkICUoc3J0X3RleHQpcyAvICUoc2l6ZSlzPC90ZD5cIix7bGFuZzplLHVwZ3JhZGVfdGV4dDpnZXR0ZXh0KFwiPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSdidG4gYnRuLWluZm8nPlVwZ3JhZGU8L2J1dHRvbj5cIiksdHJhbnNsYXRlZDpvLHRyYW5zbGF0ZWRfdGV4dDpnZXR0ZXh0KFwiVHJhbnNsYXRlZFwiKSxzcnQ6YyxzcnRfdGV4dDpnZXR0ZXh0KFwiU3VidGl0bGVzXCIpLHNpemU6c3ByaW50ZihcIiU1LjJmIE1CXCIsdS56aXBfc2l6ZS8xZTZ8fDApfSl9ZWxzZSBpKz1zcHJpbnRmKFwiPHRkIGNsYXNzPSd1cGdyYWRlLWxpbmsnPiUodXBfdG9fZGF0ZV90ZXh0KXM8L3RkPlwiLHt1cF90b19kYXRlX3RleHQ6Z2V0dGV4dChcIlVwIHRvIERhdGVcIil9KX19aSs9XCJlblwiIT1sP3NwcmludGYoXCI8dGQgY2xhc3M9J2RlbGV0ZS1sYW5ndWFnZS1idXR0b24nPiA8YnV0dG9uIGNsYXNzPSdidG4gYnRuLWRhbmdlcicgdmFsdWU9JyVzJyB0eXBlPSdidXR0b24nPiVzPC9idXR0b24+PC90ZD5cIixsLGdldHRleHQoXCJEZWxldGVcIikpOmUuc3VidGl0bGVfY291bnQ+MD9zcHJpbnRmKFwiPHRkIGNsYXNzPSdkZWxldGUtbGFuZ3VhZ2UtYnV0dG9uJz4gPGJ1dHRvbiBjbGFzcz0nYnRuIGJ0bi1kYW5nZXInIHZhbHVlPSclcycgdHlwZT0nYnV0dG9uJz4lczwvYnV0dG9uPjwvdGQ+XCIsbCxnZXR0ZXh0KFwiRGVsZXRlIFN1YnRpdGxlc1wiKSk6c3ByaW50ZihcIjx0ZCBjbGFzcz0nZGVsZXRlLWxhbmd1YWdlLWJ1dHRvbic+PC90ZD5cIiksaSs9XCI8dGQgY2xhc3M9J2NsZWFyJz48L3RkPjwvdHI+XCIsJChcInRhYmxlLmluc3RhbGxlZC1sYW5ndWFnZXNcIikuYXBwZW5kKGkpfX0pLCQoZnVuY3Rpb24oKXskKFwiLmRlbGV0ZS1sYW5ndWFnZS1idXR0b25cIikuY2hpbGRyZW4oXCJidXR0b25cIikuY2xpY2soZnVuY3Rpb24odCl7ZnVuY3Rpb24gYSh0KXskKFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kVG8oXCJib2R5XCIpLmh0bWwoXCI8ZGl2PjxoNj5cIit0K1wiPzwvaDY+PC9kaXY+XCIpLmRpYWxvZyh7bW9kYWw6ITAsdGl0bGU6Z2V0dGV4dChcIkNvbmZpcm0gRGVsZXRlXCIpLHpJbmRleDoxZTQsYXV0b09wZW46ITAsd2lkdGg6XCJhdXRvXCIscmVzaXphYmxlOiExLGJ1dHRvbnM6e1llczpmdW5jdGlvbigpe2UobiksJCh0aGlzKS5yZW1vdmUoKX0sTm86ZnVuY3Rpb24oKXskKHRoaXMpLnJlbW92ZSgpfX19KX12YXIgbj0kKHRoaXMpLnZhbCgpO2Eoc3ByaW50ZihnZXR0ZXh0KFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBsYW5ndWFnZSBwYWNrICclKGxhbmdfY29kZSlzJ1wiKSx7bGFuZ19jb2RlOm59KSksJChcImJ1dHRvbi51aS1kaWFsb2ctdGl0bGViYXItY2xvc2VcIikuaGlkZSgpfSl9KSx0KCksJChcIiNiZXRhLWNoZWNrYm94XCIpLmNsaWNrKGZ1bmN0aW9uKCl7dCgpfSl9ZnVuY3Rpb24gc3RhcnRfbGFuZ3VhZ2VwYWNrX2Rvd25sb2FkKGUpe21lc3NhZ2VzLmNsZWFyX21lc3NhZ2VzKCksJChcIiNnZXQtbGFuZ3VhZ2UtYnV0dG9uXCIpLnByb3AoXCJkaXNhYmxlZFwiLCEwKSxkb3dubG9hZGluZz0hMCxhcGkuZG9SZXF1ZXN0KFVybHMuc3RhcnRfbGFuZ3VhZ2VwYWNrX2Rvd25sb2FkKCkse2xhbmc6ZX0pLnN1Y2Nlc3MoZnVuY3Rpb24oZSx0LGEpe2Jhc2UudXBkYXRlc1N0YXJ0KFwicmV0cmlldmVjb250ZW50cGFja1wiLDJlMyxsYW5ndWFnZXBhY2tfY2FsbGJhY2tzKX0pfWZ1bmN0aW9uIHNlbGVjdF9sYW5nX3BhY2soZSl7dmFyIHQ9ZS5kYXRhLmNhbGxlcl92YWx1ZSxhPSExLG49JChzcHJpbnRmKFwiI29wdGlvbi0lc1wiLHQpKTskKFwiI2xhbmd1YWdlLXBhY2tzLXNlbGVjdGlvblwiKS5odG1sKG4uaHRtbCgpKS5hcHBlbmQoJChcIjxzcGFuPjwvc3Bhbj5cIikuYXR0cihcImNsYXNzXCIsXCJjYXJldFwiKSksJChcIiNsYW5ndWFnZS1wYWNrc1wiKS5hdHRyKFwidmFsdWVcIixuLmF0dHIoXCJ2YWx1ZVwiKSk7dmFyIHM9aW5zdGFsbGFibGVfbGFuZ3VhZ2VzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gdD09PWUuY29kZX0pO2lmKGE9MCE9PXMubGVuZ3RoLGRvd25sb2FkaW5nfHwkKFwiI2dldC1sYW5ndWFnZS1idXR0b25cIikucHJvcChcImRpc2FibGVkXCIsIWEpLGEpe3ZhciBsPXNbMF07JChcIiNscC1udW0tc3J0c1wiKS50ZXh0KHNwcmludGYoXCIlZFwiLGwuc3VidGl0bGVfY291bnR8fDApKSwkKFwiI2xwLXBjdC10cmFuc1wiKS50ZXh0KHNwcmludGYoXCIlNS4yZiUlXCIsbC5wZXJjZW50X3RyYW5zbGF0ZWR8fDApKSwkKFwiI2xwLWRvd24tc2l6ZVwiKS50ZXh0KHNwcmludGYoXCIlNS4yZiBNQlwiLGwuemlwX3NpemUvMWU2fHwwKSksJChcIiNscC1kaXNrLXNpemVcIikudGV4dChzcHJpbnRmKFwiJTUuMmYgTUJcIixsLnBhY2thZ2Vfc2l6ZS8xZTZ8fDApKSwkKFwiI2xwLW51bS1leGVyc1wiKS50ZXh0KHNwcmludGYoXCIlZFwiLGwubnVtX2V4ZXJjaXNlc3x8MCkpfSQoXCIjbGFuZ3BhY2stZGV0YWlsc1wiKS50b2dnbGUoYSl9ZnVuY3Rpb24gbGFuZ3VhZ2VwYWNrX3Jlc2V0X2NhbGxiYWNrKGUsdCl7Z2V0X2luc3RhbGxlZF9sYW5ndWFnZXMoKSxkb3dubG9hZGluZz0hMX1mdW5jdGlvbiBsYW5ndWFnZXBhY2tfY29tcGxldGVfY2FsbGJhY2soZSl7fWZ1bmN0aW9uIHNldF9zZXJ2ZXJfbGFuZ3VhZ2UoZSl7YXBpLmRvUmVxdWVzdChVcmxzLnNldF9kZWZhdWx0X2xhbmd1YWdlKCkse2xhbmc6ZX0pLnN1Y2Nlc3MoZnVuY3Rpb24oKXt3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9KX1mdW5jdGlvbiB1cGRhdGVfc2VydmVyX3N0YXR1cygpe2Nvbm5lY3Rpdml0eS53aXRoX29ubGluZV9zdGF0dXMoXCJzZXJ2ZXJcIixmdW5jdGlvbihlKXtlP2Jhc2UudXBkYXRlc1N0YXJ0KFwicmV0cmlldmVjb250ZW50cGFja1wiLDFlMyxsYW5ndWFnZXBhY2tfY2FsbGJhY2tzKToobWVzc2FnZXMuY2xlYXJfbWVzc2FnZXMoKSxtZXNzYWdlcy5zaG93X21lc3NhZ2UoXCJlcnJvclwiLGdldHRleHQoXCJDb3VsZCBub3QgY29ubmVjdCB0byB0aGUgY2VudHJhbCBzZXJ2ZXI7IGxhbmd1YWdlIHBhY2tzIGNhbm5vdCBiZSBkb3dubG9hZGVkIGF0IHRoaXMgdGltZS5cIikpKX0pfXZhciBhcGk9cmVxdWlyZShcInV0aWxzL2FwaVwiKSwkPXJlcXVpcmUoXCJiYXNlL2pRdWVyeVwiKSxtZXNzYWdlcz1yZXF1aXJlKFwidXRpbHMvbWVzc2FnZXNcIiksYmFzZT1yZXF1aXJlKFwidXBkYXRlcy9iYXNlXCIpLGNvbm5lY3Rpdml0eT1yZXF1aXJlKFwidXRpbHMvY29ubmVjdGl2aXR5XCIpLHNwcmludGY9cmVxdWlyZShcInNwcmludGYtanNcIikuc3ByaW50ZixpbnN0YWxsYWJsZV9sYW5ndWFnZXM9W10saW5zdGFsbGVkX2xhbmd1YWdlcz1bXSxkb3dubG9hZGluZz0hMSxsYW5ndWFnZXBhY2tfY2FsbGJhY2tzPXtyZXNldDpsYW5ndWFnZXBhY2tfcmVzZXRfY2FsbGJhY2ssY29tcGxldGVkOmxhbmd1YWdlcGFja19jb21wbGV0ZV9jYWxsYmFja307d2luZG93LnN0YXJ0X2xhbmd1YWdlcGFja19kb3dubG9hZD1zdGFydF9sYW5ndWFnZXBhY2tfZG93bmxvYWQ7dmFyIGxhbmd1YWdlX2Rvd25sb2FkaW5nPW51bGw7JChmdW5jdGlvbigpeyQoXCIjZ2V0LWxhbmd1YWdlLWJ1dHRvblwiKS5jbGljayhmdW5jdGlvbihlKXtsYW5ndWFnZV9kb3dubG9hZGluZz0kKFwiI2xhbmd1YWdlLXBhY2tzXCIpLmF0dHIoXCJ2YWx1ZVwiKSxzdGFydF9sYW5ndWFnZXBhY2tfZG93bmxvYWQobGFuZ3VhZ2VfZG93bmxvYWRpbmcpfSl9KSx3aW5kb3cuc2V0X3NlcnZlcl9sYW5ndWFnZT1zZXRfc2VydmVyX2xhbmd1YWdlLCQoZnVuY3Rpb24oKXtnZXRfYXZhaWxhYmxlX2xhbmd1YWdlcygpLnN1Y2Nlc3ModXBkYXRlX3NlcnZlcl9zdGF0dXMpLmZhaWwodXBkYXRlX3NlcnZlcl9zdGF0dXMpLGdldF9pbnN0YWxsZWRfbGFuZ3VhZ2VzKCkuc3VjY2Vzcyh1cGRhdGVfc2VydmVyX3N0YXR1cykuZmFpbCh1cGRhdGVfc2VydmVyX3N0YXR1cyl9KTsiXX0=
